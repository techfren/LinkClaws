{"version":3,"sources":["../src/mcp.ts"],"sourcesContent":["import { z } from 'zod'\nimport { type ToolCallback } from '@modelcontextprotocol/sdk/server/mcp.js'\nimport { type ToolAnnotations } from '@modelcontextprotocol/sdk/types.js'\n\nimport { ListToolkit } from './toolkit.js'\nimport { type Tool } from './tools.js'\nimport { safeFunc } from './util.js'\n\ninterface McpTool {\n    name: string\n    title: string\n    description: string\n    inputSchema: z.ZodRawShape\n    callback: ToolCallback<z.ZodRawShape>\n    annotations?: ToolAnnotations\n}\n\nexport class AgentMailToolkit extends ListToolkit<McpTool> {\n    protected buildTool(tool: Tool): McpTool {\n        const title = tool.name\n            .split('_')\n            .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n            .join(' ')\n\n        return {\n            name: tool.name,\n            title,\n            description: tool.description,\n            inputSchema: tool.paramsSchema.shape,\n            callback: async (args) => {\n                const { isError, result } = await safeFunc(tool.func, this.client, args)\n                return {\n                    content: [{ type: 'text' as const, text: JSON.stringify(result, null, 2) }],\n                    structuredContent: result,\n                    isError,\n                }\n            },\n            annotations: { title, ...tool.annotations },\n        }\n    }\n}\n"],"mappings":";;;;;;AAiBO,IAAM,mBAAN,cAA+B,YAAqB;AAAA,EAC7C,UAAU,MAAqB;AACrC,UAAM,QAAQ,KAAK,KACd,MAAM,GAAG,EACT,IAAI,CAAC,SAAS,KAAK,OAAO,CAAC,EAAE,YAAY,IAAI,KAAK,MAAM,CAAC,CAAC,EAC1D,KAAK,GAAG;AAEb,WAAO;AAAA,MACH,MAAM,KAAK;AAAA,MACX;AAAA,MACA,aAAa,KAAK;AAAA,MAClB,aAAa,KAAK,aAAa;AAAA,MAC/B,UAAU,OAAO,SAAS;AACtB,cAAM,EAAE,SAAS,OAAO,IAAI,MAAM,SAAS,KAAK,MAAM,KAAK,QAAQ,IAAI;AACvE,eAAO;AAAA,UACH,SAAS,CAAC,EAAE,MAAM,QAAiB,MAAM,KAAK,UAAU,QAAQ,MAAM,CAAC,EAAE,CAAC;AAAA,UAC1E,mBAAmB;AAAA,UACnB;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,aAAa,EAAE,OAAO,GAAG,KAAK,YAAY;AAAA,IAC9C;AAAA,EACJ;AACJ;","names":[]}